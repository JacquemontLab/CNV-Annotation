#!/bin/bash

# Description:
# This script processes a tab-separated input file to create a new output file with a constructed CNV_ID column.
# The CNV_ID is generated by concatenating the values of columns 2, 3, 4, and 5, separated by underscores.
# The output file contains a header with "CNV_ID" followed by all columns from the 7th to the last of the input file.
# For each data row, it prints the constructed CNV_ID and columns 7 to the end, preserving tab separation.

# Usage:
# ./script.sh input_file.tsv output_file.tsv


# Assign arguments
input_file="$1"
output_file="$2"

awk -F'\t' 'BEGIN {OFS="\t"}
    NR==1 {
    # Print header with CNV_ID plus columns 7 to end
    header = "CNV_ID"
    for (i=7; i<=NF; i++) header = header OFS $i
    print header
    next
    }
    {
    cnv_id = $2 "_" $3 "_" $4 "_" $5
    row = cnv_id
    for (i=7; i<=NF; i++) row = row OFS $i
    print row
    }' "$input_file" > "$output_file"